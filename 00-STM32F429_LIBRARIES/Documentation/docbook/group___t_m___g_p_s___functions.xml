<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="group___t_m___g_p_s___functions">
    <title>TM_GPS_Functions</title>

<para>Library Functions. </para>
        <section>
            <title>Detailed Description</title>
        </section>
        <section>
            <title>Functions</title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>void <link linkend="group___t_m___g_p_s___functions_1gaa1e7909c24c99c907d5edcd688b8cdcb">TM_GPS_Init</link> (
<link linkend="struct_t_m___g_p_s___data__t">TM_GPS_Data_t</link> * GPS_Data, uint32_t baudrate)<para><emphasis>Initializes GPS and USART peripheral.</emphasis></para>
</para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para><link linkend="group___t_m___g_p_s___typedefs_1gaf3a9184315a145cb8288691c9c529427">TM_GPS_Result_t</link> <link linkend="group___t_m___g_p_s___functions_1ga31b1673ec7171ea8c552afddaa8e5bb6">TM_GPS_Update</link> (
<link linkend="struct_t_m___g_p_s___data__t">TM_GPS_Data_t</link> * GPS_Data)<para><emphasis>Update GPS data.</emphasis></para>
</para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>float <link linkend="group___t_m___g_p_s___functions_1gaa9fb934f21d0fb34dab7a672497826c6">TM_GPS_ConvertSpeed</link> (
float SpeedInKnots, <link linkend="group___t_m___g_p_s___typedefs_1ga287710c2af22ad207c305aeb2e6ea69c">TM_GPS_Speed_t</link> toSpeed)<para><emphasis>Converts speed in knots (from GPS) to user selectable speed.</emphasis></para>
</para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>void <link linkend="group___t_m___g_p_s___functions_1gaad0f22897c6acf1b2530a6547b39b0d9">TM_GPS_ConvertFloat</link> (
float num, <link linkend="struct_t_m___g_p_s___float__t">TM_GPS_Float_t</link> * Float_Data, uint8_t decimals)<para><emphasis>Converts float number into integer and decimal part.</emphasis></para>
</para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>void <link linkend="group___t_m___g_p_s___functions_1ga7a44cb46476dea773206800f3cb5e99b">TM_GPS_DistanceBetween</link> (
<link linkend="struct_t_m___g_p_s___distance__t">TM_GPS_Distance_t</link> * Distance_Data)<para><emphasis>Calculates distance between 2 coordinates on earth and bearing from start to end point in relation to the north.</emphasis></para>
</para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
        <section>
            <title>Function Documentation</title>
            <section xml:id="group___t_m___g_p_s___functions_1gaa1e7909c24c99c907d5edcd688b8cdcb">
                <title>void TM_GPS_Init (TM_GPS_Data_t *GPS_Data, uint32_t baudrate)</title> <emphasis>Initializes GPS and USART peripheral.</emphasis>
                
<para>
                <formalpara>
                    <title/>
                    <table frame="all">
                        <title>Parameters                        </title>
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
                                <entry>*GPS_Data</entry>
                                <entry>
<para>Pointer to <link linkend="struct_t_m___g_p_s___data__t">TM_GPS_Data_t</link> structure to set default values </para>
</entry>
                            </row>
                            <row>
                                <entry>baudrate</entry>
                                <entry>
<para>Specify GPS baudrate for USART. Most common are 9600 or 115200 bauds </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                </formalpara>
                <formalpara><title>Note: </title>

<para>GPS baudrate can have other values. Check GPS datasheet for proper info. </para>
</formalpara>

                <formalpara>
                    <title/>
                    <table frame="all">
                        <title>Return values                        </title>
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
                                <entry>None</entry>
                                <entry>
<para></para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                </formalpara>
                </para>

            </section>
            <section xml:id="group___t_m___g_p_s___functions_1ga31b1673ec7171ea8c552afddaa8e5bb6">
                <title>TM_GPS_Result_t TM_GPS_Update (TM_GPS_Data_t *GPS_Data)</title> <emphasis>Update GPS data.</emphasis>
                
<para>Update GPS data. This function must be called periodically, as fast as possible. It basically checks if data is available on USART and parse it to useful value.</para>

<para>Parameters:<itemizedlist>
<listitem>
<para>TM_GPS_Data_t* GPS_Data: Pointer to <link linkend="struct_t_m___g_p_s___data__t">TM_GPS_Data_t</link> struct variable</para>
</listitem></itemizedlist>
</para>

<para>When you first call this function and there is not available data from GPS, this function will return TM_GPS_Result_FirstTimeWaiting. This will be returning all the time we don&apos;t have any useful data. When first time useful data is received from GPS (everything parsed), TM_GPS_Result_NewData will be returned. When we have already new data, next time we call this function, TM_GPS_Result_OldData will be returning until we don&apos;t receive new packet of useful data. <formalpara><title>Note: </title>

<para>This function must be called periodically, as fast as possible. It basically checks if data is available on GPS USART and parse it to useful data for user. </para>
<simplesect/>
<para>- When you first call this function and there is not available data from GPS, this function will return TM_GPS_Result_FirstTimeWaiting.<itemizedlist>
<listitem>
<para>This will be returning all the time we don&apos;t have any useful data.</para>
</listitem><listitem>
<para>When first time useful data is received from GPS (everything parsed), <link linkend="group___t_m___g_p_s___typedefs_1ggaf3a9184315a145cb8288691c9c529427a53532f11f7d268cfe75af5360985ff34">TM_GPS_Result_NewData</link> will be returned.</para>
</listitem><listitem>
<para>When we have already new data, next time we call this function, <link linkend="group___t_m___g_p_s___typedefs_1ggaf3a9184315a145cb8288691c9c529427a5098e6636e25483bc0580f8d947a0ff8">TM_GPS_Result_OldData</link> will be returning until we don&apos;t receive new packet of useful data. </para>
</listitem></itemizedlist>
</para>
<simplesect/>
<para>If you are making GPS logger, then when you receive <link linkend="group___t_m___g_p_s___typedefs_1ggaf3a9184315a145cb8288691c9c529427a53532f11f7d268cfe75af5360985ff34">TM_GPS_Result_NewData</link> it is time to save your data. </para>
</formalpara>

                <formalpara>
                    <title/>
                    <table frame="all">
                        <title>Parameters                        </title>
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
                                <entry>*GPS_Data</entry>
                                <entry>
<para>Pointer to working <link linkend="struct_t_m___g_p_s___data__t">TM_GPS_Data_t</link> structure </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                </formalpara>
                
                <formalpara>
                    <title/>
                    <table frame="all">
                        <title>Return values                        </title>
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
                                <entry>Returns</entry>
                                <entry>
<para>value of <link linkend="group___t_m___g_p_s___typedefs_1gaf3a9184315a145cb8288691c9c529427">TM_GPS_Result_t</link> structure </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                </formalpara>
                </para>

            </section>
            <section xml:id="group___t_m___g_p_s___functions_1gaa9fb934f21d0fb34dab7a672497826c6">
                <title>float TM_GPS_ConvertSpeed (float SpeedInKnots, TM_GPS_Speed_t toSpeed)</title> <emphasis>Converts speed in knots (from GPS) to user selectable speed.</emphasis>
                
<para>
                <formalpara>
                    <title/>
                    <table frame="all">
                        <title>Parameters                        </title>
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
                                <entry>speedInKnots</entry>
                                <entry>
<para>float value from GPS module </para>
</entry>
                            </row>
                            <row>
                                <entry>toSpeed</entry>
                                <entry>
<para>Select to which speed you want conversion from knot. This parameter ca be a value of TM_GPS_Speed_t enumeration. </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                </formalpara>
                
                <formalpara>
                    <title/>
                    <table frame="all">
                        <title>Return values                        </title>
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
                                <entry>Calculated</entry>
                                <entry>
<para>speed from knots to user selectable format </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                </formalpara>
                </para>

            </section>
            <section xml:id="group___t_m___g_p_s___functions_1gaad0f22897c6acf1b2530a6547b39b0d9">
                <title>void TM_GPS_ConvertFloat (float num, TM_GPS_Float_t *Float_Data, uint8_t decimals)</title> <emphasis>Converts float number into integer and decimal part.</emphasis>
                
<para>
                <formalpara>
                    <title/>
                    <table frame="all">
                        <title>Parameters                        </title>
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
                                <entry>num</entry>
                                <entry>
<para>Float number to split into 2 parts </para>
</entry>
                            </row>
                            <row>
                                <entry>*Float_Data</entry>
                                <entry>
<para>Pointer to <link linkend="struct_t_m___g_p_s___float__t">TM_GPS_Float_t</link> structure where to save result </para>
</entry>
                            </row>
                            <row>
                                <entry>decimals</entry>
                                <entry>
<para>Number of decimal places for conversion </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                </formalpara>
                <formalpara><title>Note: </title>

<para>Example: You have number 15.002 in float format.<itemizedlist>
<listitem>
<para>You want to split this to integer and decimal part with 6 decimal places.</para>
</listitem><listitem>
<para>Call TM_GPS_ConvertFloat(15.002, &amp;Float_Struct, 6);</para>
</listitem><listitem>
<para>Result will be: Integer: 15; Decimal: 2000 (0.002 * 10^6) </para>
</listitem></itemizedlist>
</para>
</formalpara>

                <formalpara>
                    <title/>
                    <table frame="all">
                        <title>Return values                        </title>
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
                                <entry>None</entry>
                                <entry>
<para></para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                </formalpara>
                </para>

            </section>
            <section xml:id="group___t_m___g_p_s___functions_1ga7a44cb46476dea773206800f3cb5e99b">
                <title>void TM_GPS_DistanceBetween (TM_GPS_Distance_t *Distance_Data)</title> <emphasis>Calculates distance between 2 coordinates on earth and bearing from start to end point in relation to the north.</emphasis>
                
<para>
                <formalpara>
                    <title/>
                    <table frame="all">
                        <title>Parameters                        </title>
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
                                <entry>*Distance_Data</entry>
                                <entry>
<para>Pointer to <link linkend="struct_t_m___g_p_s___distance__t">TM_GPS_Distance_t</link> structure with latitude and longitude set values </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                </formalpara>
                <formalpara><title>Note: </title>

<para>Calculation results will be saved in *Distance_Data <link linkend="struct_t_m___g_p_s___distance__t">TM_GPS_Distance_t</link> structure </para>
</formalpara>

                <formalpara>
                    <title/>
                    <table frame="all">
                        <title>Return values                        </title>
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
                                <entry>None</entry>
                                <entry>
<para></para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                </formalpara>
                </para>

            </section>
        </section>
</section>
