\hypertarget{tm__stm32f4__otp_8h_source}{}\subsection{tm\+\_\+stm32f4\+\_\+otp.\+h}

\begin{DoxyCode}
00001 
00037 \textcolor{preprocessor}{#ifndef TM\_OTP\_H}
00038 \textcolor{preprocessor}{#define TM\_OTP\_H 100}
00039 
00040 \textcolor{comment}{/* C++ detection */}
00041 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
00042 \textcolor{keyword}{extern} C \{
00043 \textcolor{preprocessor}{#endif}
00044 
00055 \textcolor{preprocessor}{#include "stm32f4xx.h"}
00056 \textcolor{preprocessor}{#include "stm32f4xx\_rcc.h"}
00057 \textcolor{preprocessor}{#include "stm32f4xx\_flash.h"}
00058 \textcolor{preprocessor}{#include "defines.h"}
00059 
00060 \textcolor{comment}{/* OTP start & lock addresses */}
00061 \textcolor{preprocessor}{#define OTP\_START\_ADDR      (0x1FFF7800)}
00062 \textcolor{preprocessor}{#define OTP\_LOCK\_ADDR       (0x1FFF7A00)}
00063     
00064 \textcolor{comment}{/* OTP size definitions */}
00065 \textcolor{preprocessor}{#define OTP\_BLOCKS          16}
00066 \textcolor{preprocessor}{#define OTP\_BYTES\_IN\_BLOCK  32}
00067 \textcolor{preprocessor}{#define OTP\_SIZE            (OTP\_BLOCKS * OTP\_BYTES\_IN\_BLOCK)}
00068 
00080 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{
00081     TM\_OTP\_Result\_Ok = 0,
00082     TM\_OTP\_Result\_Error
00083 \} TM\_OTP\_Result\_t;
00084 
00102 \textcolor{keyword}{extern} TM\_OTP\_Result\_t TM\_OTP\_Write(uint8\_t block, uint8\_t byte, uint8\_t data);
00103 
00117 \textcolor{keyword}{extern} uint8\_t TM\_OTP\_Read(uint8\_t block, uint8\_t byte);
00118 
00132 \textcolor{keyword}{extern} TM\_OTP\_Result\_t TM\_OTP\_BlockLock(uint8\_t block);
00133 
00143 \textcolor{preprocessor}{#define TM\_OTP\_BlockLocked(block)   ((*(\_\_IO uint8\_t *) (OTP\_LOCK\_ADDR + block)) == 0x00 ? 1 : 0)}
00144 
00145 \textcolor{comment}{/* C++ detection */}
00146 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
00147 \}
00148 \textcolor{preprocessor}{#endif}
00149 
00150 \textcolor{preprocessor}{#endif}
\end{DoxyCode}
