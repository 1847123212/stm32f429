\hypertarget{tm__stm32f4__i2c_8h_source}{}\subsection{tm\+\_\+stm32f4\+\_\+i2c.\+h}

\begin{DoxyCode}
00001 
00083 \textcolor{preprocessor}{#ifndef TM\_I2C\_H}
00084 \textcolor{preprocessor}{#define TM\_I2C\_H 150}
00085 
00096 \textcolor{preprocessor}{#include "stm32f4xx.h"}
00097 \textcolor{preprocessor}{#include "stm32f4xx\_i2c.h"}
00098 \textcolor{preprocessor}{#include "attributes.h"}
00099 \textcolor{preprocessor}{#include "defines.h"}
00100 \textcolor{preprocessor}{#include "tm\_stm32f4\_gpio.h"}
00101 
00102 \textcolor{comment}{/* Timeout */}
00103 \textcolor{preprocessor}{#ifndef TM\_I2C\_TIMEOUT}
00104 \textcolor{preprocessor}{#define TM\_I2C\_TIMEOUT                  20000}
00105 \textcolor{preprocessor}{#endif}
00106 
00107 \textcolor{comment}{/* I2C1 settings, change them in defines.h project file */}
00108 \textcolor{preprocessor}{#ifndef TM\_I2C1\_ACKNOWLEDGED\_ADDRESS}
00109 \textcolor{preprocessor}{#define TM\_I2C1\_ACKNOWLEDGED\_ADDRESS    I2C\_AcknowledgedAddress\_7bit}
00110 \textcolor{preprocessor}{#endif}
00111 \textcolor{preprocessor}{#ifndef TM\_I2C1\_MODE}
00112 \textcolor{preprocessor}{#define TM\_I2C1\_MODE                    I2C\_Mode\_I2C}
00113 \textcolor{preprocessor}{#endif}
00114 \textcolor{preprocessor}{#ifndef TM\_I2C1\_OWN\_ADDRESS}
00115 \textcolor{preprocessor}{#define TM\_I2C1\_OWN\_ADDRESS             0x00}
00116 \textcolor{preprocessor}{#endif}
00117 \textcolor{preprocessor}{#ifndef TM\_I2C1\_ACK}
00118 \textcolor{preprocessor}{#define TM\_I2C1\_ACK                     I2C\_Ack\_Disable}
00119 \textcolor{preprocessor}{#endif}
00120 \textcolor{preprocessor}{#ifndef TM\_I2C1\_DUTY\_CYCLE}
00121 \textcolor{preprocessor}{#define TM\_I2C1\_DUTY\_CYCLE              I2C\_DutyCycle\_2}
00122 \textcolor{preprocessor}{#endif}
00123 
00124 \textcolor{comment}{/* I2C2 settings, change them in defines.h project file */}
00125 \textcolor{preprocessor}{#ifndef TM\_I2C2\_ACKNOWLEDGED\_ADDRESS}
00126 \textcolor{preprocessor}{#define TM\_I2C2\_ACKNOWLEDGED\_ADDRESS    I2C\_AcknowledgedAddress\_7bit}
00127 \textcolor{preprocessor}{#endif}
00128 \textcolor{preprocessor}{#ifndef TM\_I2C2\_MODE}
00129 \textcolor{preprocessor}{#define TM\_I2C2\_MODE                    I2C\_Mode\_I2C}
00130 \textcolor{preprocessor}{#endif}
00131 \textcolor{preprocessor}{#ifndef TM\_I2C2\_OWN\_ADDRESS}
00132 \textcolor{preprocessor}{#define TM\_I2C2\_OWN\_ADDRESS             0x00}
00133 \textcolor{preprocessor}{#endif}
00134 \textcolor{preprocessor}{#ifndef TM\_I2C2\_ACK}
00135 \textcolor{preprocessor}{#define TM\_I2C2\_ACK                     I2C\_Ack\_Disable}
00136 \textcolor{preprocessor}{#endif}
00137 \textcolor{preprocessor}{#ifndef TM\_I2C2\_DUTY\_CYCLE}
00138 \textcolor{preprocessor}{#define TM\_I2C2\_DUTY\_CYCLE              I2C\_DutyCycle\_2}
00139 \textcolor{preprocessor}{#endif}
00140 
00141 \textcolor{comment}{/* I2C3 settings, change them in defines.h project file */}
00142 \textcolor{preprocessor}{#ifndef TM\_I2C3\_ACKNOWLEDGED\_ADDRESS}
00143 \textcolor{preprocessor}{#define TM\_I2C3\_ACKNOWLEDGED\_ADDRESS    I2C\_AcknowledgedAddress\_7bit}
00144 \textcolor{preprocessor}{#endif}
00145 \textcolor{preprocessor}{#ifndef TM\_I2C3\_MODE}
00146 \textcolor{preprocessor}{#define TM\_I2C3\_MODE                    I2C\_Mode\_I2C}
00147 \textcolor{preprocessor}{#endif}
00148 \textcolor{preprocessor}{#ifndef TM\_I2C3\_OWN\_ADDRESS}
00149 \textcolor{preprocessor}{#define TM\_I2C3\_OWN\_ADDRESS             0x00}
00150 \textcolor{preprocessor}{#endif}
00151 \textcolor{preprocessor}{#ifndef TM\_I2C3\_ACK}
00152 \textcolor{preprocessor}{#define TM\_I2C3\_ACK                     I2C\_Ack\_Disable}
00153 \textcolor{preprocessor}{#endif}
00154 \textcolor{preprocessor}{#ifndef TM\_I2C3\_DUTY\_CYCLE}
00155 \textcolor{preprocessor}{#define TM\_I2C3\_DUTY\_CYCLE              I2C\_DutyCycle\_2}
00156 \textcolor{preprocessor}{#endif}
00157 
00158 \textcolor{comment}{/* I2C speed modes */}
00159 \textcolor{preprocessor}{#define TM\_I2C\_CLOCK\_STANDARD           100000}
00160 \textcolor{preprocessor}{#define TM\_I2C\_CLOCK\_FAST\_MODE          400000}
00161 \textcolor{preprocessor}{#define TM\_I2C\_CLOCK\_FAST\_MODE\_PLUS     1000000}
00162 \textcolor{preprocessor}{#define TM\_I2C\_CLOCK\_HIGH\_SPEED         3400000}
00163 
00167 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{
00168     TM\_I2C\_PinsPack\_1,
00169     TM\_I2C\_PinsPack\_2,
00170     TM\_I2C\_PinsPack\_3,
00171     TM\_I2C\_PinsPack\_Custom
00172 \} TM\_I2C\_PinsPack\_t;
00173 
00182 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_I2C\_Init(I2C\_TypeDef* I2Cx, TM\_I2C\_PinsPack\_t pinspack, uint32\_t clockSpeed);
00183 
00194 \textcolor{keyword}{extern} uint8\_t TM\_I2C\_Read(I2C\_TypeDef* I2Cx, uint8\_t address, uint8\_t reg);
00195 
00206 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_I2C\_ReadMulti(I2C\_TypeDef* I2Cx, uint8\_t address, uint8\_t reg, uint8\_t *data, uint16\_t count
      );
00207 
00215 \textcolor{keyword}{extern} uint8\_t TM\_I2C\_ReadNoRegister(I2C\_TypeDef* I2Cx, uint8\_t address);
00216 
00226 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_I2C\_ReadMultiNoRegister(I2C\_TypeDef* I2Cx, uint8\_t address, uint8\_t* data, uint16\_t count);
00227 
00237 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_I2C\_Write(I2C\_TypeDef* I2Cx, uint8\_t address, uint8\_t reg, uint8\_t data);
00238 
00249 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_I2C\_WriteMulti(I2C\_TypeDef* I2Cx, uint8\_t address, uint8\_t reg, uint8\_t *data, uint16\_t 
      count);
00250 
00265 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_I2C\_WriteNoRegister(I2C\_TypeDef* I2Cx, uint8\_t address, uint8\_t data);
00266 
00276 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_I2C\_WriteMultiNoRegister(I2C\_TypeDef* I2Cx, uint8\_t address, uint8\_t* data, uint16\_t count);
00277 
00287 \textcolor{keyword}{extern} uint8\_t TM\_I2C\_IsDeviceConnected(I2C\_TypeDef* I2Cx, uint8\_t address);
00288 
00300 \textcolor{keyword}{extern} int16\_t TM\_I2C\_Start(I2C\_TypeDef* I2Cx, uint8\_t address, uint8\_t direction, uint8\_t ack);
00301 
00310 \textcolor{keyword}{extern} uint8\_t TM\_I2C\_Stop(I2C\_TypeDef* I2Cx);
00311 
00322 \textcolor{keyword}{extern} uint8\_t TM\_I2C\_ReadNack(I2C\_TypeDef* I2Cx);
00323 
00334 \textcolor{keyword}{extern} uint8\_t TM\_I2C\_ReadAck(I2C\_TypeDef* I2Cx);
00335 
00345 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_I2C\_WriteData(I2C\_TypeDef* I2Cx, uint8\_t data);
00346 
00361 \textcolor{keyword}{extern} \_\_weak \textcolor{keywordtype}{void} TM\_I2C\_InitCustomPinsCallback(I2C\_TypeDef* I2Cx);
00362 
00363 \textcolor{preprocessor}{#endif}
00364 
\end{DoxyCode}
