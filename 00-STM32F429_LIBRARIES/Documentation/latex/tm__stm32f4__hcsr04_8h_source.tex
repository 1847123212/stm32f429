\hypertarget{tm__stm32f4__hcsr04_8h_source}{}\subsection{tm\+\_\+stm32f4\+\_\+hcsr04.\+h}

\begin{DoxyCode}
00001 
00057 \textcolor{preprocessor}{#ifndef TM\_HCSR04\_H}
00058 \textcolor{preprocessor}{#define TM\_HCSR04\_H 120}
00059 
00069 \textcolor{preprocessor}{#include "stm32f4xx.h"}
00070 \textcolor{preprocessor}{#include "defines.h"}
00071 \textcolor{preprocessor}{#include "tm\_stm32f4\_delay.h"}
00072 \textcolor{preprocessor}{#include "tm\_stm32f4\_gpio.h"}
00073 
00074 \textcolor{comment}{/* Trigger PIN */}
00075 \textcolor{preprocessor}{#ifndef HCSR04\_TRIGGER\_PIN}
00076 \textcolor{preprocessor}{#define HCSR04\_TRIGGER\_PORT     GPIOB}
00077 \textcolor{preprocessor}{#define HCSR04\_TRIGGER\_PIN      GPIO\_PIN\_2}
00078 \textcolor{preprocessor}{#endif}
00079 
00080 \textcolor{comment}{/* Echo PIN */}
00081 \textcolor{preprocessor}{#ifndef HCSR04\_ECHO\_PIN}
00082 \textcolor{preprocessor}{#define HCSR04\_ECHO\_PORT        GPIOB}
00083 \textcolor{preprocessor}{#define HCSR04\_ECHO\_PIN         GPIO\_PIN\_3}
00084 \textcolor{preprocessor}{#endif}
00085 
00086 \textcolor{comment}{/* Default timeout pulses */}
00087 \textcolor{preprocessor}{#ifndef HCSR04\_TIMEOUT}
00088 \textcolor{preprocessor}{#define HCSR04\_TIMEOUT          1000000}
00089 \textcolor{preprocessor}{#endif}
00090 
00091 \textcolor{comment}{/* Pin operations */}
00092 \textcolor{preprocessor}{#define HCSR04\_TRIGGER\_LOW      TM\_GPIO\_SetPinLow(HCSR04\_TRIGGER\_PORT, HCSR04\_TRIGGER\_PIN)}
00093 \textcolor{preprocessor}{#define HCSR04\_TRIGGER\_HIGH     TM\_GPIO\_SetPinHigh(HCSR04\_TRIGGER\_PORT, HCSR04\_TRIGGER\_PIN)}
00094 \textcolor{preprocessor}{#define HCSR04\_ECHO\_CHECK       TM\_GPIO\_GetInputPinValue(HCSR04\_ECHO\_PORT, HCSR04\_ECHO\_PIN)}
00095 
00096 \textcolor{comment}{/* Time to cm */}
00097 \textcolor{preprocessor}{#define HCSR04\_NUMBER           ((float)0.0171821)}
00098 
00104 \textcolor{keyword}{extern} uint8\_t TM\_HCSR04\_Init(\textcolor{keywordtype}{void});
00105 
00111 \textcolor{keyword}{extern} \textcolor{keywordtype}{float} TM\_HCSR04\_Read(\textcolor{keywordtype}{void});
00112 
00113 \textcolor{preprocessor}{#endif}
\end{DoxyCode}
