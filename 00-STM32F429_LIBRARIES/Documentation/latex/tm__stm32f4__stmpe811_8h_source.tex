\hypertarget{tm__stm32f4__stmpe811_8h_source}{}\subsection{tm\+\_\+stm32f4\+\_\+stmpe811.\+h}

\begin{DoxyCode}
00001 
00053 \textcolor{preprocessor}{#ifndef TM\_STMPE811\_H}
00054 \textcolor{preprocessor}{#define TM\_STMPE811\_H   120}
00055 
00067 \textcolor{preprocessor}{#include "stm32f4xx.h"}
00068 \textcolor{preprocessor}{#include "stm32f4xx\_rcc.h"}
00069 \textcolor{preprocessor}{#include "stm32f4xx\_gpio.h"}
00070 \textcolor{preprocessor}{#include "defines.h"}
00071 \textcolor{preprocessor}{#include "tm\_stm32f4\_i2c.h"}
00072 \textcolor{preprocessor}{#include "tm\_stm32f4\_delay.h"}
00073 
00074 \textcolor{comment}{/* Default I2C used, on F429 Discovery board */}
00075 \textcolor{preprocessor}{#ifndef STMPE811\_I2C}
00076 \textcolor{preprocessor}{#define STMPE811\_I2C                    I2C3}
00077 \textcolor{preprocessor}{#define STMPE811\_I2C\_PINSPACK           TM\_I2C\_PinsPack\_1}
00078 \textcolor{preprocessor}{#endif}
00079 
00080 \textcolor{preprocessor}{#ifndef STMPE811\_I2C\_CLOCK}
00081 \textcolor{preprocessor}{#define STMPE811\_I2C\_CLOCK              100000}
00082 \textcolor{preprocessor}{#endif}
00083 
00084 \textcolor{comment}{/* I2C address */}
00085 \textcolor{preprocessor}{#define STMPE811\_ADDRESS                0x82}
00086 
00087 \textcolor{comment}{/* STMPE811 Chip ID on reset */}
00088 \textcolor{preprocessor}{#define STMPE811\_CHIP\_ID\_VALUE          0x0811  //Chip ID}
00089 
00090 \textcolor{comment}{/* Registers */}
00091 \textcolor{preprocessor}{#define STMPE811\_CHIP\_ID                0x00    //STMPE811 Device identification}
00092 \textcolor{preprocessor}{#define STMPE811\_ID\_VER                 0x02    //STMPE811 Revision number; 0x01 for engineering sample;
       0x03 for final silicon}
00093 \textcolor{preprocessor}{#define STMPE811\_SYS\_CTRL1              0x03    //Reset control}
00094 \textcolor{preprocessor}{#define STMPE811\_SYS\_CTRL2              0x04    //Clock control}
00095 \textcolor{preprocessor}{#define STMPE811\_SPI\_CFG                0x08    //SPI interface configuration}
00096 \textcolor{preprocessor}{#define STMPE811\_INT\_CTRL               0x09    //Interrupt control register}
00097 \textcolor{preprocessor}{#define STMPE811\_INT\_EN                 0x0A    //Interrupt enable register}
00098 \textcolor{preprocessor}{#define STMPE811\_INT\_STA                0x0B    //Interrupt status register}
00099 \textcolor{preprocessor}{#define STMPE811\_GPIO\_EN                0x0C    //GPIO interrupt enable register}
00100 \textcolor{preprocessor}{#define STMPE811\_GPIO\_INT\_STA           0x0D    //GPIO interrupt status register}
00101 \textcolor{preprocessor}{#define STMPE811\_ADC\_INT\_EN             0x0E    //ADC interrupt enable register}
00102 \textcolor{preprocessor}{#define STMPE811\_ADC\_INT\_STA            0x0F    //ADC interface status register}
00103 \textcolor{preprocessor}{#define STMPE811\_GPIO\_SET\_PIN           0x10    //GPIO set pin register}
00104 \textcolor{preprocessor}{#define STMPE811\_GPIO\_CLR\_PIN           0x11    //GPIO clear pin register}
00105 \textcolor{preprocessor}{#define STMPE811\_MP\_STA                 0x12    //GPIO monitor pin state register}
00106 \textcolor{preprocessor}{#define STMPE811\_GPIO\_DIR               0x13    //GPIO direction register}
00107 \textcolor{preprocessor}{#define STMPE811\_GPIO\_ED                0x14    //GPIO edge detect register}
00108 \textcolor{preprocessor}{#define STMPE811\_GPIO\_RE                0x15    //GPIO rising edge register}
00109 \textcolor{preprocessor}{#define STMPE811\_GPIO\_FE                0x16    //GPIO falling edge register}
00110 \textcolor{preprocessor}{#define STMPE811\_GPIO\_AF                0x17    //alternate function register}
00111 \textcolor{preprocessor}{#define STMPE811\_ADC\_CTRL1              0x20    //ADC control}
00112 \textcolor{preprocessor}{#define STMPE811\_ADC\_CTRL2              0x21    //ADC control}
00113 \textcolor{preprocessor}{#define STMPE811\_ADC\_CAPT               0x22    //To initiate ADC data acquisition}
00114 \textcolor{preprocessor}{#define STMPE811\_ADC\_DATA\_CHO           0x30    //ADC channel 0}
00115 \textcolor{preprocessor}{#define STMPE811\_ADC\_DATA\_CH1           0x32    //ADC channel 1}
00116 \textcolor{preprocessor}{#define STMPE811\_ADC\_DATA\_CH2           0x34    //ADC channel 2}
00117 \textcolor{preprocessor}{#define STMPE811\_ADC\_DATA\_CH3           0x36    //ADC channel 3}
00118 \textcolor{preprocessor}{#define STMPE811\_ADC\_DATA\_CH4           0x38    //ADC channel 4}
00119 \textcolor{preprocessor}{#define STMPE811\_ADC\_DATA\_CH5           0x3A    //ADC channel 5}
00120 \textcolor{preprocessor}{#define STMPE811\_ADC\_DATA\_CH6           0x3C    //ADC channel 6}
00121 \textcolor{preprocessor}{#define STMPE811\_ADC\_DATA\_CH7           0x3E    //ADC channel 7}
00122 \textcolor{preprocessor}{#define STMPE811\_TSC\_CTRL               0x40    //4-wire touchscreen controller setup}
00123 \textcolor{preprocessor}{#define STMPE811\_TSC\_CFG                0x41    //Touchscreen controller configuration}
00124 \textcolor{preprocessor}{#define STMPE811\_WDW\_TR\_X               0x42    //Window setup for top right X}
00125 \textcolor{preprocessor}{#define STMPE811\_WDW\_TR\_Y               0x44    //Window setup for top right Y}
00126 \textcolor{preprocessor}{#define STMPE811\_WDW\_BL\_X               0x46    //Window setup for bottom left X}
00127 \textcolor{preprocessor}{#define STMPE811\_WDW\_BL\_Y               0x48    //Window setup for bottom left Y}
00128 \textcolor{preprocessor}{#define STMPE811\_FIFO\_TH                0x4A    //FIFO level to generate interrupt}
00129 \textcolor{preprocessor}{#define STMPE811\_FIFO\_STA               0x4B    //Current status of FIFO}
00130 \textcolor{preprocessor}{#define STMPE811\_FIFO\_SIZE              0x4C    //Current filled level of FIFO}
00131 \textcolor{preprocessor}{#define STMPE811\_TSC\_DATA\_X             0x4D    //Data port for touchscreen controller data access}
00132 \textcolor{preprocessor}{#define STMPE811\_TSC\_DATA\_Y             0x4F    //Data port for touchscreen controller data access}
00133 \textcolor{preprocessor}{#define STMPE811\_TSC\_DATA\_Z             0x51    //Data port for touchscreen controller data access}
00134 \textcolor{preprocessor}{#define STMPE811\_TSC\_DATA\_XYZ           0x52    //Data port for touchscreen controller data access}
00135 \textcolor{preprocessor}{#define STMPE811\_TSC\_FRACTION\_Z         0x56    //Touchscreen controller FRACTION\_Z}
00136 \textcolor{preprocessor}{#define STMPE811\_TSC\_DATA               0x57    //Data port for touchscreen controller data access}
00137 \textcolor{preprocessor}{#define STMPE811\_TSC\_I\_DRIVE            0x58    //Touchscreen controller drivel}
00138 \textcolor{preprocessor}{#define STMPE811\_TSC\_SHIELD             0x59    //Touchscreen controller shield}
00139 \textcolor{preprocessor}{#define STMPE811\_TEMP\_CTRL              0x60    //Temperature sensor setup}
00140 \textcolor{preprocessor}{#define STMPE811\_TEMP\_DATA              0x61    //Temperature data access port}
00141 \textcolor{preprocessor}{#define STMPE811\_TEMP\_TH                0x62    //Threshold for temperature controlled interrupt}
00142 
00146 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{
00147     TM\_STMPE811\_Orientation\_Portrait\_1,
00148     TM\_STMPE811\_Orientation\_Portrait\_2,
00149     TM\_STMPE811\_Orientation\_Landscape\_1,
00150     TM\_STMPE811\_Orientation\_Landscape\_2,
00151 \} TM\_STMPE811\_Orientation\_t;
00152 
00156 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{
00157     TM\_STMPE811\_State\_Pressed,
00158     TM\_STMPE811\_State\_Released,
00159     TM\_STMPE811\_State\_Ok,
00160     TM\_STMPE811\_State\_Error
00161 \} TM\_STMPE811\_State\_t;
00162 
\hypertarget{tm__stm32f4__stmpe811_8h_source_l00177}{}\hyperlink{struct_t_m___s_t_m_p_e811___touch_data}{00177} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{
00178     uint16\_t x;
00179     uint16\_t y;
00180     TM\_STMPE811\_State\_t pressed;
00181     TM\_STMPE811\_State\_t last\_pressed;
00182     TM\_STMPE811\_Orientation\_t orientation;
00183 \} \hyperlink{struct_t_m___s_t_m_p_e811___touch_data}{TM\_STMPE811\_TouchData};
00184 
00190 \textcolor{keyword}{extern} TM\_STMPE811\_State\_t TM\_STMPE811\_Init(\textcolor{keywordtype}{void});
00191 
00200 \textcolor{keyword}{extern} TM\_STMPE811\_State\_t TM\_STMPE811\_ReadTouch(\hyperlink{struct_t_m___s_t_m_p_e811___touch_data}{TM\_STMPE811\_TouchData} *structdata);
00201 
00202 \textcolor{preprocessor}{#define TM\_STMPE811\_TouchInRectangle(sd, xPos, yPos, w, h)  (((sd)->x >= (xPos)) && ((sd)->x < (xPos + w))
       && ((sd)->y >= (yPos)) && ((sd)->y < (yPos + h)))}
00203 
00204 \textcolor{preprocessor}{#endif}
00205 
\end{DoxyCode}
