\hypertarget{tm__stm32f4__onewire_8h_source}{}\subsection{tm\+\_\+stm32f4\+\_\+onewire.\+h}

\begin{DoxyCode}
00001 
00047 \textcolor{preprocessor}{#ifndef TM\_ONEWIRE\_H}
00048 \textcolor{preprocessor}{#define TM\_ONEWIRE\_H 210}
00049 
00061 \textcolor{preprocessor}{#include "stm32f4xx.h"}
00062 \textcolor{preprocessor}{#include "stm32f4xx\_rcc.h"}
00063 \textcolor{preprocessor}{#include "stm32f4xx\_gpio.h"}
00064 \textcolor{preprocessor}{#include "defines.h"}
00065 \textcolor{preprocessor}{#include "tm\_stm32f4\_delay.h"}
00066 \textcolor{preprocessor}{#include "tm\_stm32f4\_gpio.h"}
00067 
00068 \textcolor{comment}{/* OneWire delay */}
00069 \textcolor{preprocessor}{#define ONEWIRE\_DELAY(x)                Delay(x)}
00070 
00071 \textcolor{comment}{/* Pin settings */}
00072 \textcolor{preprocessor}{#define ONEWIRE\_LOW(structure)          TM\_GPIO\_SetPinLow((structure)->GPIOx, (structure)->GPIO\_Pin)}
00073 \textcolor{preprocessor}{#define ONEWIRE\_HIGH(structure)         TM\_GPIO\_SetPinHigh((structure)->GPIOx, (structure)->GPIO\_Pin)}
00074 \textcolor{preprocessor}{#define ONEWIRE\_INPUT(structure)        TM\_GPIO\_SetPinAsInput(structure->GPIOx, (structure)->GPIO\_Pin)}
00075 \textcolor{preprocessor}{#define ONEWIRE\_OUTPUT(structure)       TM\_GPIO\_SetPinAsOutput(structure->GPIOx, (structure)->GPIO\_Pin)}
00076 
00077 \textcolor{comment}{/* OneWire commands */}
00078 \textcolor{preprocessor}{#define ONEWIRE\_CMD\_RSCRATCHPAD         0xBE}
00079 \textcolor{preprocessor}{#define ONEWIRE\_CMD\_WSCRATCHPAD         0x4E}
00080 \textcolor{preprocessor}{#define ONEWIRE\_CMD\_CPYSCRATCHPAD       0x48}
00081 \textcolor{preprocessor}{#define ONEWIRE\_CMD\_RECEEPROM           0xB8}
00082 \textcolor{preprocessor}{#define ONEWIRE\_CMD\_RPWRSUPPLY          0xB4}
00083 \textcolor{preprocessor}{#define ONEWIRE\_CMD\_SEARCHROM           0xF0}
00084 \textcolor{preprocessor}{#define ONEWIRE\_CMD\_READROM             0x33}
00085 \textcolor{preprocessor}{#define ONEWIRE\_CMD\_MATCHROM            0x55}
00086 \textcolor{preprocessor}{#define ONEWIRE\_CMD\_SKIPROM             0xCC}
00087 
\hypertarget{tm__stm32f4__onewire_8h_source_l00105}{}\hyperlink{struct_t_m___one_wire__t}{00105} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{
00106     GPIO\_TypeDef* GPIOx;
00107     uint16\_t GPIO\_Pin;
00108     uint8\_t LastDiscrepancy;
00109     uint8\_t LastFamilyDiscrepancy;
00110     uint8\_t LastDeviceFlag;
00111     uint8\_t ROM\_NO[8];
00112 \} \hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t};
00113 
00127 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_OneWire\_Init(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct, GPIO\_TypeDef* GPIOx, uint16\_t GPIO\_Pin
      );
00128 
00140 \textcolor{keyword}{extern} uint8\_t TM\_OneWire\_Reset(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct);
00141 
00151 \textcolor{keyword}{extern} uint8\_t TM\_OneWire\_ReadByte(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct);
00152 
00164 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_OneWire\_WriteByte(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct, uint8\_t byte);
00165 
00177 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_OneWire\_WriteBit(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct, uint8\_t bit);
00178 
00188 \textcolor{keyword}{extern} uint8\_t TM\_OneWire\_ReadBit(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct);
00189 
00200 \textcolor{keyword}{extern} uint8\_t TM\_OneWire\_Search(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct, uint8\_t command);
00201 
00211 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_OneWire\_ResetSearch(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct);
00212 
00222 \textcolor{keyword}{extern} uint8\_t TM\_OneWire\_First(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct);
00223 
00233 \textcolor{keyword}{extern} uint8\_t TM\_OneWire\_Next(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct);
00234 
00246 \textcolor{keyword}{extern} uint8\_t TM\_OneWire\_GetROM(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct, uint8\_t index);
00247 
00259 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_OneWire\_GetFullROM(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct, uint8\_t *firstIndex);
00260 
00272 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_OneWire\_Select(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct, uint8\_t* addr);
00273 
00285 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} TM\_OneWire\_SelectWithPointer(\hyperlink{struct_t_m___one_wire__t}{TM\_OneWire\_t}* OneWireStruct, uint8\_t* ROM);
00286 
00298 \textcolor{keyword}{extern} uint8\_t TM\_OneWire\_CRC8(uint8\_t* addr, uint8\_t len);
00299 
00300 \textcolor{preprocessor}{#endif}
00301 
\end{DoxyCode}
