\hypertarget{tm__stm32f4__am2301_8h_source}{}\subsection{tm\+\_\+stm32f4\+\_\+am2301.\+h}

\begin{DoxyCode}
00001 
00061 \textcolor{preprocessor}{#ifndef TM\_AM2301\_H}
00062 \textcolor{preprocessor}{#define TM\_AM2301\_H 130}
00063 
00073 \textcolor{preprocessor}{#include "stm32f4xx.h"}
00074 \textcolor{preprocessor}{#include "defines.h"}
00075 \textcolor{preprocessor}{#include "tm\_stm32f4\_delay.h"}
00076 \textcolor{preprocessor}{#include "tm\_stm32f4\_gpio.h"}
00077 
00078 \textcolor{comment}{/* Default data pin, overwrite it in defines.h file */}
00079 \textcolor{preprocessor}{#ifndef AM2301\_PIN}
00080 \textcolor{preprocessor}{#define AM2301\_PORT             GPIOD}
00081 \textcolor{preprocessor}{#define AM2301\_PIN              GPIO\_PIN\_1}
00082 \textcolor{preprocessor}{#endif}
00083 
00084 \textcolor{comment}{/* Pin settings */}
00085 \textcolor{preprocessor}{#define AM2301\_PIN\_LOW          TM\_GPIO\_SetPinLow(AM2301\_PORT, AM2301\_PIN)}
00086 \textcolor{preprocessor}{#define AM2301\_PIN\_HIGH         TM\_GPIO\_SetPinHigh(AM2301\_PORT, AM2301\_PIN)}
00087 \textcolor{preprocessor}{#define AM2301\_PIN\_IN           TM\_GPIO\_SetPinAsInput(AM2301\_PORT, AM2301\_PIN)}
00088 \textcolor{preprocessor}{#define AM2301\_PIN\_OUT          TM\_GPIO\_SetPinAsOutput(AM2301\_PORT, AM2301\_PIN)}
00089 \textcolor{preprocessor}{#define AM2301\_PIN\_READ         TM\_GPIO\_GetInputPinValue(AM2301\_PORT, AM2301\_PIN)}
00090 
00097 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{
00098     TM\_AM2301\_OK,                       \textcolor{comment}{/* Data OK */}
00099     TM\_AM2301\_ERROR,                    \textcolor{comment}{/* An error */}
00100     TM\_AM2301\_CONNECTION\_ERROR,         \textcolor{comment}{/* Device is not connected */}
00101     TM\_AM2301\_WAITHIGH\_ERROR,
00102     TM\_AM2301\_WAITLOW\_ERROR,
00103     TM\_AM2301\_WAITHIGH\_LOOP\_ERROR,
00104     TM\_AM2301\_WAITLOW\_LOOP\_ERROR,
00105     TM\_AM2301\_PARITY\_ERROR              \textcolor{comment}{/* Data read fail */}
00106 \} TM\_AM2301\_t;
00107 
\hypertarget{tm__stm32f4__am2301_8h_source_l00119}{}\hyperlink{struct_t_m___a_m2301___data__t}{00119} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{
00120     int16\_t Temp;
00121     uint16\_t Hum;
00122 \} \hyperlink{struct_t_m___a_m2301___data__t}{TM\_AM2301\_Data\_t};
00123 
00129 \textcolor{keyword}{extern} TM\_AM2301\_t TM\_AM2301\_Init(\textcolor{keywordtype}{void});
00130 
00140 \textcolor{keyword}{extern} TM\_AM2301\_t TM\_AM2301\_Read(\hyperlink{struct_t_m___a_m2301___data__t}{TM\_AM2301\_Data\_t}* data);
00141 
00142 \textcolor{preprocessor}{#endif}
00143 
\end{DoxyCode}
