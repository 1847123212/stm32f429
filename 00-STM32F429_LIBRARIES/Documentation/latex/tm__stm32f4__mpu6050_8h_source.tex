\hypertarget{tm__stm32f4__mpu6050_8h_source}{}\subsection{tm\+\_\+stm32f4\+\_\+mpu6050.\+h}

\begin{DoxyCode}
00001 
00039 \textcolor{preprocessor}{#ifndef TM\_MPU6050\_H}
00040 \textcolor{preprocessor}{#define TM\_MPU6050\_H 100}
00041 
00042 \textcolor{comment}{/* C++ detection */}
00043 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
00044 \textcolor{keyword}{extern} C \{
00045 \textcolor{preprocessor}{#endif}
00046 
00059 \textcolor{preprocessor}{#include "stm32f4xx.h"}
00060 \textcolor{preprocessor}{#include "stm32f4xx\_rcc.h"}
00061 \textcolor{preprocessor}{#include "stm32f4xx\_gpio.h"}
00062 \textcolor{preprocessor}{#include "stm32f4xx\_i2c.h"}
00063 \textcolor{preprocessor}{#include "defines.h"}
00064 \textcolor{preprocessor}{#include "tm\_stm32f4\_i2c.h"}
00065 
00066 \textcolor{comment}{/* Default I2C used */}
00067 \textcolor{preprocessor}{#ifndef MPU6050\_I2C}
00068 \textcolor{preprocessor}{#define MPU6050\_I2C                 I2C3}
00069 \textcolor{preprocessor}{#define MPU6050\_I2C\_PINSPACK        TM\_I2C\_PinsPack\_1}
00070 \textcolor{preprocessor}{#endif}
00071 
00072 \textcolor{comment}{/* Default I2C clock */}
00073 \textcolor{preprocessor}{#ifndef MPU6050\_I2C\_CLOCK}
00074 \textcolor{preprocessor}{#define MPU6050\_I2C\_CLOCK           400000}
00075 \textcolor{preprocessor}{#endif}
00076 
00077 \textcolor{comment}{/* Default I2C address */}
00078 \textcolor{preprocessor}{#define MPU6050\_I2C\_ADDR            0xD0}
00079 
00080 \textcolor{comment}{/* Who I am register value */}
00081 \textcolor{preprocessor}{#define MPU6050\_I\_AM                0x68}
00082 
00083 \textcolor{comment}{/* MPU6050 registers */}
00084 \textcolor{preprocessor}{#define MPU6050\_AUX\_VDDIO           0x01}
00085 \textcolor{preprocessor}{#define MPU6050\_SMPLRT\_DIV          0x19}
00086 \textcolor{preprocessor}{#define MPU6050\_CONFIG              0x1A}
00087 \textcolor{preprocessor}{#define MPU6050\_GYRO\_CONFIG         0x1B}
00088 \textcolor{preprocessor}{#define MPU6050\_ACCEL\_CONFIG        0x1C}
00089 \textcolor{preprocessor}{#define MPU6050\_MOTION\_THRESH       0x1F}
00090 \textcolor{preprocessor}{#define MPU6050\_INT\_PIN\_CFG         0x37}
00091 \textcolor{preprocessor}{#define MPU6050\_INT\_ENABLE          0x38}
00092 \textcolor{preprocessor}{#define MPU6050\_INT\_STATUS          0x3A}
00093 \textcolor{preprocessor}{#define MPU6050\_ACCEL\_XOUT\_H        0x3B}
00094 \textcolor{preprocessor}{#define MPU6050\_ACCEL\_XOUT\_L        0x3C}
00095 \textcolor{preprocessor}{#define MPU6050\_ACCEL\_YOUT\_H        0x3D}
00096 \textcolor{preprocessor}{#define MPU6050\_ACCEL\_YOUT\_L        0x3E}
00097 \textcolor{preprocessor}{#define MPU6050\_ACCEL\_ZOUT\_H        0x3F}
00098 \textcolor{preprocessor}{#define MPU6050\_ACCEL\_ZOUT\_L        0x40}
00099 \textcolor{preprocessor}{#define MPU6050\_TEMP\_OUT\_H          0x41}
00100 \textcolor{preprocessor}{#define MPU6050\_TEMP\_OUT\_L          0x42}
00101 \textcolor{preprocessor}{#define MPU6050\_GYRO\_XOUT\_H         0x43}
00102 \textcolor{preprocessor}{#define MPU6050\_GYRO\_XOUT\_L         0x44}
00103 \textcolor{preprocessor}{#define MPU6050\_GYRO\_YOUT\_H         0x45}
00104 \textcolor{preprocessor}{#define MPU6050\_GYRO\_YOUT\_L         0x46}
00105 \textcolor{preprocessor}{#define MPU6050\_GYRO\_ZOUT\_H         0x47}
00106 \textcolor{preprocessor}{#define MPU6050\_GYRO\_ZOUT\_L         0x48}
00107 \textcolor{preprocessor}{#define MPU6050\_MOT\_DETECT\_STATUS   0x61}
00108 \textcolor{preprocessor}{#define MPU6050\_SIGNAL\_PATH\_RESET   0x68}
00109 \textcolor{preprocessor}{#define MPU6050\_MOT\_DETECT\_CTRL     0x69}
00110 \textcolor{preprocessor}{#define MPU6050\_USER\_CTRL           0x6A}
00111 \textcolor{preprocessor}{#define MPU6050\_PWR\_MGMT\_1          0x6B}
00112 \textcolor{preprocessor}{#define MPU6050\_PWR\_MGMT\_2          0x6C}
00113 \textcolor{preprocessor}{#define MPU6050\_FIFO\_COUNTH         0x72}
00114 \textcolor{preprocessor}{#define MPU6050\_FIFO\_COUNTL         0x73}
00115 \textcolor{preprocessor}{#define MPU6050\_FIFO\_R\_W            0x74}
00116 \textcolor{preprocessor}{#define MPU6050\_WHO\_AM\_I            0x75}
00117 
00118 \textcolor{comment}{/* Gyro sensitivities in Â°/s */}
00119 \textcolor{preprocessor}{#define MPU6050\_GYRO\_SENS\_250       ((float) 131)}
00120 \textcolor{preprocessor}{#define MPU6050\_GYRO\_SENS\_500       ((float) 65.5)}
00121 \textcolor{preprocessor}{#define MPU6050\_GYRO\_SENS\_1000      ((float) 32.8)}
00122 \textcolor{preprocessor}{#define MPU6050\_GYRO\_SENS\_2000      ((float) 16.4)}
00123 
00124 \textcolor{comment}{/* Acce sensitivities in g */}
00125 \textcolor{preprocessor}{#define MPU6050\_ACCE\_SENS\_2         ((float) 16384)}
00126 \textcolor{preprocessor}{#define MPU6050\_ACCE\_SENS\_4         ((float) 8192)}
00127 \textcolor{preprocessor}{#define MPU6050\_ACCE\_SENS\_8         ((float) 4096)}
00128 \textcolor{preprocessor}{#define MPU6050\_ACCE\_SENS\_16        ((float) 2048)}
00129 
00140 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{
00141     TM\_MPU6050\_Device\_0 = 0,
00142     TM\_MPU6050\_Device\_1 = 0x02
00143 \} TM\_MPU6050\_Device\_t;
00144 
00156 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{
00157     TM\_MPU6050\_Result\_Ok = 0x00,
00158     TM\_MPU6050\_Result\_DeviceNotConnected,
00159     TM\_MPU6050\_Result\_DeviceInvalid
00160 \} TM\_MPU6050\_Result\_t;
00161 
00175 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{
00176     TM\_MPU6050\_Accelerometer\_2G = 0x00,
00177     TM\_MPU6050\_Accelerometer\_4G = 0x01,
00178     TM\_MPU6050\_Accelerometer\_8G = 0x02,
00179     TM\_MPU6050\_Accelerometer\_16G = 0x03
00180 \} TM\_MPU6050\_Accelerometer\_t;
00181 
00195 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{
00196     TM\_MPU6050\_Gyroscope\_250s = 0x00,
00197     TM\_MPU6050\_Gyroscope\_500s = 0x01,
00198     TM\_MPU6050\_Gyroscope\_1000s = 0x02,
00199     TM\_MPU6050\_Gyroscope\_2000s = 0x03
00200 \} TM\_MPU6050\_Gyroscope\_t;
00201 
\hypertarget{tm__stm32f4__mpu6050_8h_source_l00231}{}\hyperlink{struct_t_m___m_p_u6050__t}{00231} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{
00232     \textcolor{comment}{/* Private */}
00233     uint8\_t Address;
00234     \textcolor{keywordtype}{float} Gyro\_Mult;
00235     \textcolor{keywordtype}{float} Acce\_Mult;
00236     \textcolor{comment}{/* Public */}
00237     int16\_t Accelerometer\_X;
00238     int16\_t Accelerometer\_Y;
00239     int16\_t Accelerometer\_Z;
00240     int16\_t Gyroscope\_X;
00241     int16\_t Gyroscope\_Y;
00242     int16\_t Gyroscope\_Z;
00243     \textcolor{keywordtype}{float} Temperature;
00244 \} \hyperlink{struct_t_m___m_p_u6050__t}{TM\_MPU6050\_t};
00245 
00246 
00265 \textcolor{keyword}{extern} TM\_MPU6050\_Result\_t TM\_MPU6050\_Init(\hyperlink{struct_t_m___m_p_u6050__t}{TM\_MPU6050\_t}* DataStruct, TM\_MPU6050\_Device\_t 
      DeviceNumber, TM\_MPU6050\_Accelerometer\_t AccelerometerSensitivity, TM\_MPU6050\_Gyroscope\_t GyroscopeSensitivity);
00266 
00276 \textcolor{keyword}{extern} TM\_MPU6050\_Result\_t TM\_MPU6050\_ReadAccelerometer(\hyperlink{struct_t_m___m_p_u6050__t}{TM\_MPU6050\_t}* DataStruct);
00277 
00287 \textcolor{keyword}{extern} TM\_MPU6050\_Result\_t TM\_MPU6050\_ReadGyroscope(\hyperlink{struct_t_m___m_p_u6050__t}{TM\_MPU6050\_t}* DataStruct);
00288 
00298 \textcolor{keyword}{extern} TM\_MPU6050\_Result\_t TM\_MPU6050\_ReadTemperature(\hyperlink{struct_t_m___m_p_u6050__t}{TM\_MPU6050\_t}* DataStruct);
00299 
00309 \textcolor{keyword}{extern} TM\_MPU6050\_Result\_t TM\_MPU6050\_ReadAll(\hyperlink{struct_t_m___m_p_u6050__t}{TM\_MPU6050\_t}* DataStruct);
00310 
00311 \textcolor{comment}{/* C++ detection */}
00312 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
00313 \}
00314 \textcolor{preprocessor}{#endif}
00315 
00316 \textcolor{preprocessor}{#endif}
\end{DoxyCode}
